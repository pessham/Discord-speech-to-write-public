# スタエフ文字おこし屋さん Bot 使い方ガイド（利用者向け）

> このドキュメントは **Bot を利用するメンバー** に向けた簡単な操作説明書です。インストールやセットアップは管理者が済ませている前提で、日常的に使うコマンドと注意点だけをまとめています。

---

## 基本機能
| 機能 | 概要 |
|------|------|
| stand.fm エピソード文字起こし | エピソード URL を貼って `もじ` と送信すると文字起こし＋要約を返信 |
| 音声ファイル文字起こし | 音声ファイルを添付して `!transcribe` コマンドを送信 |
| プロンプト確認 | 現在の要約プロンプトを表示（読み取り専用） `!showprompt` |

---

## 使い方 ① stand.fm URL
1. チャンネルに **stand.fm のエピソード URL**（例: `https://stand.fm/episodes/643e8c0...`）を貼ります。
   - Bot が `👍` リアクションを付けたら準備完了!
2. 同じチャンネルで **`もじ`** とだけ送信します。
3. 数分待つと、
   - 文字起こし全文
   - 3 行要約 + X(Twitter) 投稿文
   が順番に返信されます。

> 文字起こしは最大 20 分まで・1 サーバー 1 日 5 回までです。

---

## 使い方 ② 音声ファイルを直接アップロード
1. `mp3 / wav / m4a / ogg / webm` などの音声ファイルを添付。
2. メッセージ欄に **`!transcribe`** と入力して送信します。
3. Bot が文字起こし・要約を返信します（①と同じ形式）。

---

## コマンド一覧
| コマンド | 送信例 | 説明 |
|----------|--------|------|
| `もじ` | `もじ` | 直近に送った stand.fm URL を文字起こし & 要約 |
| `!transcribe` | (音声ファイルを添付して) `!transcribe` | アップロードした音声を文字起こし & 要約 |
| `!showprompt` | `!showprompt` | 現在の要約テンプレートを表示（閲覧のみ） |

> `!setprompt` や `!post` は管理者専用です。一般ユーザーは使用できません。

---

## ヒント & 注意
- **途中経過を知りたいとき**：Bot が「文字起こし中…」「要約中…」とメッセージを出します。処理中は少し待ちましょう。
- **エラーになる場合**：
  - 音声が 20 分を超えている
  - 1 日の利用回数制限を超えた
  - OpenAI 側の混雑で失敗（まれにあります）
  → メッセージに表示されるエラー内容を確認してください。
- **スタンプ・スレッドでも使える？**：テキストメッセージとして `もじ` を送れれば OK。スレッド内でも動作します。
- **Bot が反応しない**：管理者に mention して確認してもらってください（Bot がオフライン / 権限不足 / サーバー設定など）。

---

## よくある質問 (FAQ)
**Q. 文字起こしの精度は？**  
A. Whisper (OpenAI) を使用しているため日本語でもかなり高精度ですが、環境音や早口だと誤認識が増えます。

**Q. 生成された要約がイマイチ…**  
A. サーバー管理者が `!setprompt` でプロンプトを調整できます。要望があれば伝えてください。

**Q. 返信が2回届く**  
A. Bot が二重起動している可能性があります。管理者に報告してください。

---

Have fun! 🎧📝
